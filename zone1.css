/* ===========================
   Zone 1 — Disassembly Bay
   Base styles (drop in as zone1.css)
   =========================== */

:root{
  --bg-0:#0e1116;
  --bg-1:#121722;
  --bg-2:#161c28;
  --ink-0:#e9eef9;
  --ink-1:#a9b3c7;
  --accent:#7bd3ff;
  --accent-2:#ffc86b;
  --danger:#ff6b6b;
  --ok:#72e0a8;
  --panel:#151b27cc;
  --panel-solid:#1a2130;
  --glass:#0b1019b3;
  --shadow:0 10px 28px rgba(0,0,0,.45), 0 2px 8px rgba(0,0,0,.3);
  --radius-1:12px;
  --radius-2:18px;
  --gap:14px;
  --hud-h:56px;
  --dock-h:0px; /* dock removed */
  --fx: drop-shadow(0 6px 18px rgba(0,0,0,.35));
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  /* Neutral white background to preserve artwork appearance */
  background:#ffffff;
  color:var(--ink-0);
  font:400 16px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  overflow:hidden;
}

/* ===========================
   GAME WRAPPER
   =========================== */

#game{
  position:relative;
  height:100dvh;
  display:grid;
  grid-template-rows: var(--hud-h) 1fr;
}

/* ===========================
   HUD / TOP BAR
   =========================== */

/* Light HUD on white */
#hud{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:var(--gap);
  padding:0 16px;
  background:#ffffff;
  color:#111;
  border-bottom:1px solid #e6e6e6;
  box-shadow:0 2px 12px rgba(0,0,0,.06);
  position:relative;
  z-index:3;
}

#hud .hud-left{display:flex;gap:10px;align-items:center}
#hud .hud-left strong{letter-spacing:.5px}
#hud .hud-center{opacity:.8;display:flex;gap:18px;justify-content:center;color:#444;font-size:13px}
#hud .hud-right{display:flex;gap:8px;justify-content:flex-end;align-items:center;color:#111}
#hud .sep{opacity:.4;margin:0 4px;color:#999}
#hud b{color:#111}

/* ===========================
   VIEWPORT / CANVASES
   =========================== */

#viewport{
  position:relative;
  overflow:hidden;
  /* Match page background */
  background:#ffffff;
  outline:none;
}

#world, #fx{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  display:block;
}

#fx{pointer-events:none;}

/* Player avatar and voice layer (DOM) */
#player-avatar{position:absolute;z-index:5;pointer-events:none;transform:translate(-50%,-100%)}
#voices{position:absolute;inset:0;z-index:6;pointer-events:none}
.voice.heavy{font-weight:800}
.voice{position:absolute}
.voice::after{
  content:"";
  position:absolute;
  left:50%; bottom:-6px; transform:translateX(-50%);
  width:0;height:0;
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:6px solid var(--bg, rgba(0,0,0,.7));
}

/* ===========================
   DOCK / BOTTOM BAR
   =========================== */

/* Dock removed */

/* Buttons */
button{
  appearance:none;
  border:1px solid #27324a;
  color:var(--ink-0);
  background:linear-gradient(180deg,#1a2233,#131a28);
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
  transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
  box-shadow: var(--shadow);
}
button:hover{border-color:var(--accent); box-shadow:0 8px 24px rgba(0,0,0,.45), 0 0 0 1px rgba(123,211,255,.15) inset}
button:active{transform:translateY(1px) scale(.99)}
button:disabled{opacity:.45; cursor:not-allowed; filter:grayscale(.3)}

#btn-continue{background:linear-gradient(180deg,#1f2b43,#102033);border-color:#2a3b59}
#btn-continue:not(:disabled):hover{border-color:var(--ok);box-shadow:0 8px 24px rgba(0,0,0,.45), 0 0 0 1px rgba(114,224,168,.18) inset}
/* Top HUD actions cluster */
#hud .hud-actions{display:inline-flex; gap:10px; margin-left:8px}

/* Red buttons with white text (HUD + Cancel buttons) */
#btn-help,
#btn-reset,
#btn-continue,
#cut-cancel,
#torque-cancel{
  background: linear-gradient(180deg, #e02626, #c41010);
  border-color: #b20f0f;
  color: #fff;
  text-shadow: 0 1px 0 rgba(0,0,0,.15);
  box-shadow: 0 6px 16px rgba(204,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.06);
}
#btn-help:hover,
#btn-reset:hover,
#btn-continue:hover:not(:disabled),
#cut-cancel:hover,
#torque-cancel:hover{
  background: linear-gradient(180deg, #f02a2a, #cc1212);
  border-color: #8f0c0c;
  box-shadow: 0 10px 28px rgba(204,0,0,.32), 0 0 0 1px rgba(255,255,255,.08) inset;
}
#btn-help:active,
#btn-reset:active,
#btn-continue:active:not(:disabled),
#cut-cancel:active,
#torque-cancel:active{
  background: linear-gradient(180deg, #c61919, #a90d0d);
  transform: translateY(1px) scale(.99);
}
#btn-help:disabled,
#btn-reset:disabled,
#btn-continue:disabled{
  opacity:.55;
  filter:saturate(.8) grayscale(.1);
}

/* ===========================
   OVERLAYS / MODALS
   =========================== */

.overlay{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  background: radial-gradient(1200px 800px at 50% 40%, rgba(8,12,20,.75), rgba(5,7,12,.85));
  backdrop-filter: blur(2px);
  opacity:0;
  pointer-events:none;
  transition: opacity .22s ease;
  z-index:10;
}
.overlay[aria-hidden="false"]{opacity:1; pointer-events:auto}

/* Lighter overlay mask for minigames so the world stays visible */
#overlay-cut,
#overlay-bolt,
#overlay-hold{
  background: radial-gradient(1200px 800px at 50% 40%, rgba(255,255,255,.65), rgba(255,255,255,.35));
  backdrop-filter: blur(2px) saturate(1.05);
}

.card{
  width:min(720px, calc(100% - 40px));
  padding:22px 22px 18px;
  border-radius: var(--radius-2);
  background: linear-gradient(180deg, #ffffff, #f6f6f6);
  border:1px solid #27324a;
  box-shadow: var(--shadow);
  color:#111;
}
.card.wide{width:min(1100px, calc(100% - 40px))}
.card h2{
  margin:0 0 8px;
  font-weight:700;
  letter-spacing:.4px;
}
.card .sub{margin:0 0 14px; color:var(--ink-1)}
.card .tip{color:var(--ink-1)}
.card .actions{display:flex; gap:12px; justify-content:flex-end; margin-top:14px}
.card .close{
  background: linear-gradient(180deg, #e02626, #c41010);
  border-color: #b20f0f;
  color:#fff;
}
.card .close:hover{ background: linear-gradient(180deg, #f02a2a, #cc1212); border-color:#8f0c0c }
.card .close:active{ background: linear-gradient(180deg, #c61919, #a90d0d) }

/* Precision cutting canvas */
#cut-canvas{
  width:100%;
  height:420px;
  background:#fafafa; /* bright drafting surface */
  border-radius:12px;
  border:1px solid #243048;
  box-shadow:0 8px 30px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.04);
}

/* Hold the Frame canvas */
#hold-canvas{
  width:100%;
  height:420px;
  background:#f7f8fa;
  border-radius:12px;
  border:1px solid #e3e6ef;
  box-shadow:0 8px 30px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.03);
}

/* Bolt sequence */
.sequence{
  font:600 28px/1.1 ui-sans-serif, system-ui;
  letter-spacing:.18em;
  text-align:center;
  padding:14px 12px;
  background:#0a111c;
  border:1px solid #263149;
  border-radius:12px;
  margin:10px 0 12px;
}
.progress{
  position:relative;height:10px;border-radius:999px;background:#0a1220;border:1px solid #27324a;overflow:hidden
}
.progress>span{position:absolute;inset:0; width:0%; background:linear-gradient(90deg, var(--accent), #5fb9ff);}

/* Sequential Torque UI */
#torque-canvas{
  width:100%;
  max-width:520px;
  height:auto;
  background:#fafafa;
  border:1px solid #e8e8e8;
  border-radius:12px;
  box-shadow:0 8px 30px rgba(0,0,0,.08), inset 0 0 0 1px rgba(0,0,0,.04);
  display:block;
  margin:8px auto 10px;
}
#torque-readout{
  text-align:center;
  color:#cc0000;
  font-weight:600;
  letter-spacing:.4px;
  margin-top:4px;
}

/* ===========================
   UTILITIES
   =========================== */

.sr-only{
  position:absolute!important;
  width:1px;height:1px;
  padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0
}

.hidden{display:none!important}

kbd{
  background:#0e1726;border:1px solid #2a3857;border-bottom-color:#22304a;border-radius:6px;padding:2px 6px;font:600 12px/1 ui-monospace, SFMono-Regular, Menlo, Consolas;color:#bcd2ff
}

/* Subtle hover glow for interactive moments (JS can toggle .glow on the viewport) */
#viewport.glow{box-shadow:0 0 0 2px rgba(123,211,255,.25) inset}

/* Responsive tweaks */
@media (max-width: 860px){
  :root{ --hud-h: 64px; --dock-h: 0px }
  #hud{grid-template-columns: 1fr auto; grid-auto-columns: 1fr; grid-auto-flow: column}
  #hud .hud-center{display:none}
  .card.wide{width:min(96vw,1000px)}
}
























/* ===========================
   ADD-ON PACK — INTERACTION POLISH
   (append to the end of zone1.css)
   =========================== */

/* --- Hotspot hint pips (JS will position/animate them) --- */
.hotspot-pip{
  position:absolute;
  width:16px; height:16px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff 0 25%, var(--accent) 26% 100%);
  box-shadow:0 0 12px rgba(123,211,255,.65), 0 0 2px rgba(255,255,255,.6) inset;
  transform:translate(-50%, -50%) scale(.95);
  animation: pipPulse 1.6s ease-in-out infinite;
  pointer-events:none;
  z-index:2;
}
@keyframes pipPulse{
  0%,100%{ transform:translate(-50%,-50%) scale(.95); opacity:.85 }
  50%{ transform:translate(-50%,-50%) scale(1.12); opacity:1 }
}

/* Optional ring target while hovering a hotspot */
.hotspot-ring{
  position:absolute;
  width:64px;height:64px;border-radius:50%;
  border:2px dashed rgba(123,211,255,.55);
  transform:translate(-50%,-50%);
  animation: ringSpin 8s linear infinite;
  pointer-events:none; z-index:2;
}
@keyframes ringSpin{ to{ transform:translate(-50%,-50%) rotate(360deg) }}

/* --- Avatar placeholder (simple circle you’ll steer with WASD) --- */
#avatar{
  position:absolute;
  width:24px;height:24px;border-radius:50%;
  background:linear-gradient(180deg,#ffd1a6,#f7a56d);
  border:2px solid #212a3f;
  box-shadow:0 6px 16px rgba(0,0,0,.45);
  transform:translate(-50%, -50%);
  z-index:2;
}
#avatar::after{
  content:"";
  position:absolute; inset:-6px;
  border-radius:50%;
  border:2px solid rgba(114,224,168,.18);
  animation: avatarPing 1.8s ease-out infinite;
}
@keyframes avatarPing{
  0%{ transform:scale(.8); opacity:.6 }
  80%{ transform:scale(1.4); opacity:0 }
  100%{ transform:scale(1.4); opacity:0 }
}

/* --- Tooltip for contextual prompts --- */
.tooltip{
  position:absolute;
  transform:translate(-50%, calc(-100% - 14px));
  background:var(--panel);
  color:var(--ink-0);
  border:1px solid #2b3957;
  border-radius:10px;
  padding:8px 10px;
  font-size:12px;
  white-space:nowrap;
  pointer-events:none;
  box-shadow:var(--shadow);
  z-index:4;
}
.tooltip::after{
  content:"";
  position:absolute; left:50%; bottom:-6px; transform:translateX(-50%);
  width:10px;height:10px; background:var(--panel);
  border-right:1px solid #2b3957; border-bottom:1px solid #2b3957;
  transform-origin:50% 50%; transform:translateX(-50%) rotate(45deg);
}

/* --- Toast notifications (bottom-center) --- */
#toasts{
  pointer-events:none;
  position:absolute; left:50%; bottom:calc(var(--dock-h) + 12px);
  transform:translateX(-50%);
  display:flex; flex-direction:column; gap:10px;
  z-index:9;
}
.toast{
  pointer-events:auto;
  background:var(--panel);
  border:1px solid #28324a;
  border-left:4px solid var(--accent);
  padding:10px 14px;
  border-radius:10px;
  min-width:260px;
  box-shadow:var(--shadow);
  animation: toastIn .22s ease forwards;
}
.toast.ok{ border-left-color:var(--ok) }
.toast.warn{ border-left-color:var(--danger) }
@keyframes toastIn{
  from{ opacity:0; transform:translateY(8px) }
  to{ opacity:1; transform:translateY(0) }
}

/* --- Inventory badge pill in the dock --- */
.badge{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px;
  background:var(--panel);
  border:1px solid #27324a;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
.badge .dot{
  width:10px; height:10px; border-radius:50%;
  background:var(--ok); box-shadow:0 0 0 2px rgba(114,224,168,.18);
}

/* --- Minimal mini-map (top-right, toggleable) --- */
#minimap{
  position:absolute; top:10px; right:12px;
  width:160px; height:110px;
  background:#0a0f18cc;
  border:1px solid #263149; border-radius:10px;
  box-shadow:var(--shadow);
  overflow:hidden; z-index:5;
}
#minimap canvas{ width:100%; height:100%; display:block; }

/* --- Focus glow for keyboard users --- */
:focus-visible{
  outline-color:var(--accent);
  outline-offset:2px;
}

/* --- Optional grid overlay for debugging camera vs world --- */
.debug-grid{
  background-image:
    linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
  background-size: 64px 64px, 64px 64px;
}
